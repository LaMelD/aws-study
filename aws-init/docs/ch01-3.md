# 1-3 : 하드웨어 리소스

### Amazon Elastic Compute Cloud(EC2)
- EC2
    - 클라우드 위에서 가상 서버(인스턴스), 백업 이미지(AMI, 스냅샷), 디스크(EBS), 방화벽(보안 그룹), 고정 글로벌 IP(Elastic IP) 등을 사용할 수 있게 해주는 서비스
    - 기본적인 사용 방법은 AWS가 제공하는 AMI를 기반으로 디스크 용량 또는 통신 요건을 설정해서 인스턴스를 생성하는 것이다.
    - 인스턴스에 로그인해서 미들웨어 설치 또는 설정을 할 수 있으며, 백업이 필요한 시점에 AMI를 생성하거나, 필요에 따라 Elastic IP를 부여해서 인터넷과 통신할 수 있다.
- 인스턴스
    - 기존의 On Premise 환경 위의 서버에 해당한다.
    - 인스턴스가 갖는 정보 : OS, CPU, 메모리
    - 실제로 설치할 미들웨어 또는 저장할 데이터는 EBS에 저장된다.
- 선택할 수 있는 OS의 종류
    - RedHat Enterprise Linux
    - SUSE Linux Enterprise Server
    - Ubuntu
    - Fedora
    - Debian
    - CentOS
    - Gentoo Linux
    - Oracle Linux
    - FreeBSD
    - Windows Server
- 인스턴스에 적용할 수 있는 인스턴스 유형
    - 인스턴스 유형이란 인스턴스에 적용할 CPU, 메모리, 내장 디스트, 네트워크 용량 패턴을 나타낸다.
    - 사용 목정에 따라 구분된다.
        - 범용 T2 인스턴스와 M3 인스턴스
        - CPU 성능을 높게 설정한 C3 인스턴스와 C4 인스턴스
        - 메모리 용량을 크게 설정한 R3 인스턴스
- 인스턴스 스토리지
    - EC3 인스턴스가 가동되는 물리 서버에 있는 로컬 디스크를 나타낸다.
    - 인스턴스 유형에 따라 사용할 수 있는 인스턴스 스토리지의 크기와 개수가 정해진다.
    - 인스턴스 스토리지를 사용할 때 주의해야 하는 것은 인스턴스 스토리지에 있는 데이터는 EC2 인스턴스를 중지하면 사라진다는 것이다.
- EBS-Backed 인스턴스와 Instance Store-Backed 인스턴스
    - EBS-Backed 인스턴스
        - OS를 포함한 루트 디바이스 정보를 EBS에 저장한 인스턴스를 나타낸다.
        - AWS는 EBS-Backed 인스턴스를 권장하고 있다.
        - EC2 인스턴스의 가동 중인 루트 장치와 관련된 변경 사항이 모두 EBS에 기록되므로, 인스턴스를 정지해도 변경 사항이 유지된다.
        - 변경 내용이 반영된 상태로 인스턴스를 기동할 수 있다.
    - Instance Store-Backed 인스턴스
        - OS를 포함한 루트 디바이스 정보를 S3에 저장한 인스턴스를 나타낸다.
        - 인스턴스 기동 때는 S3에서 인스턴스 스토리지에 데이터를 복사하고 기동한다.
        - 이후에 다시 기동하면 S3에서 루트 디바이스를 처음부터 읽어 들이므로, 이전 변경 사항은 모두 파기된다.
        - 루트 장치의 내용을 변경하고 싶다면 전용 도구를 사용해서 변경 후의 내용을 S3에 업로드해야 한다.
- 인스턴스 비용
    - 인스턴스 유형에 따른 가격과 시간을 곱하면 구할 수 있다.
    - 예시
        - r2.small 인스턴스를 10일 동안 사용하면 다음과 같이 계산한다.
        - `$0.04/시간 * 24시간 * 10일 = $9.6`
    - 인스턴스가 1시간을 넘지 않는 시간만큼 가동해도 1시간 만큼의 비용이 발생한다.
- 인스턴스 비용 최적화
    - 인스턴스의 활용 목적을 분명하게 해서 인스턴스 유형과 가동 시간을 조절해야 한다.
    - 인스턴스를 지정한 날짜에 가동해서 처리하는 것은 AWS가 제공하는 CLI 또는 API를 활용해 쉽게 자동화할 수 있다.
- EC2 인스턴스에서 사용하는 OS 라이선스
    - OS 라이선스 비용은 EC2 사용 비용에 포함되어 있다.
    - 선택한 OS에 따라서 같은 인스턴스 유형이라도 시간당 비용이 다를 수 있다.

### Amazon Elastic Block Store(EBS)
- EBS 볼륨 유형
    - 범용(SSD)
        - 1GB마다 3IOPS의 베이스 퍼포먼스를 가진다.
        - IOPS를 직접적으로 지정할 수는 없지만, 용량이 늘어나면 자동으로 IOPS도 올라간다.
        - 스토리지에 대한 읽고 쓰기는 비용이 추가되지 않는다.
    - 프로비저닝된 IOPS(SSD)
        - 최대 4000IOPS까지 I/O 성능을 지정할 수 있다.
        - 굉장히 빈번하게 I/O가 지속적으로 발생할 때 프로비저닝된 IOPS를 사용한다.
    - 마그네틱
        - 기존의 마그네틱 디스크에 해당한다.
        - AWS가 SSD를 지원하기 시작한 이후로는 권장하지 않고 있다.
        - SSD에 비교해서 스토리지 비용이 싸므로, 개발 환경 등에 조금만 활용하는 경우에 적합하다.
        - 읽고 쓰는 것에 대해서 비용일 발생하므로 주의가 필요하다.
- EBS 비용
    - 인스턴스 유형에 따른 가격, 용량, 시간을 곱하면 구할 수 있다.
    - 예시
        - 서울 리전에서 범용(SSD)을 10GB만큼 10일 사용하면 다음과 같이 계산한다.
        - `$0.12/(1GB/월) * 10GB / 30일(1개월) * 10일 = $0.4`
- EBS 크기 변경
    - EBS의 크기를 변경하려면 이후에 설명하는 EBS 스냅샷을 생성해야한다.
    - 생성한 EBS 스냅샷을 기반으로 EBS를 복구하게 만들고, 이때 크기를 변경해서 저장하면 된다.
    - EBS 크기를 변경할 때 용량 크기를 늘릴 수 있지만, 감소시킬 수 없다는 것에 주의가 필요하다.
- EBS 암호화
    - EBS를 새로 생성할 때 암호화 옵션을 활성화할 수 있다.
    - 암호화 방식은 AWS가 관리하는 암호 키(SSE-S3)를 활용한 AES-256 알고리즘을 사용하고 있다.
    - 암호화 옵션을 활성화한 EBS는 인스턴스에 Attach하면, 읽고 쓰는 데이터들을 암호화하게 된다.
    - 암호화 옵션을 사용한 EBS를 기반으로 만든 스냅샷(백업 기능)을 기반으로 복구하면 자동적으로 암호화 옵션이 활성화되며, 원래 EBS와 같은 키로 암호화 된다.
    - 주의 사항
        - 암호화 옵션을 활성화하지 않고 만든 EBS는 이후에 암호화 옵션을 활성화할 수 없음
        - 암호화 옵션을 활성화한 스냅샷은 다른 AWS 계정과 공유할 수 없음
        - 암호화 옵션을 사용하는 인스턴스 유형에만 사용할 수 있음
- EC2, EBS의 SLA
    - 
### EC2 백업
- Amazon Machine Image
- EBS 스냅샷
- AMI, EBS 스냅샷의 리전 간 복사
- AMI, EBS 스냅샷의 AWS 계정간 공유
- AMI, EBS 스냅샷 비용

### Amazon Simple Storage Service(S3)
- S3 확장화 구성
- S3 버킷 객체의 개념
- S3의 스토리지 옵션
- S3 비용
- S3 암호화
- S3 접근 관리
- S3 이벤트 알림
- S3의 SLA
- S3의 웹 호스팅 기능
- EBS 스냅샷과 S3 객체의 차이
- S3의 버전 관리
- S3 수명 주기 설정

### Amazon Glacier
- Glacier 비용
- Glacier의 SLA